<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<html>
    <head>
        <link rel="stylesheet" href="global.css">
    	<title>BuzzAd CPA Test Page</title>
    </head>
    <body>
        <header>
            <h1>BuzzAd CPA Integration Test</h1>
            <p><strong>Web 연동 테스트 방법</strong> : 다음 안내를 따라 테스트를 <strong>모두 완료</strong>해주세요.</p>
        </header>

        <section>
            <p>1. 다음의 링크를 <strong>우클릭</strong>하여 <strong>링크를 복사</strong> - 복사된 값을 <strong>북마크에 추가</strong></p>
    
            <a style="color: #F44336;" target="_blank" href='javascript:(function(){const BZ_TRACKKING_ID_KEY="bz_tracking_id";const BZ_TRACKKING_ID_VAL="10023_71ffbffd-ccf1-4edf-9c4c";const BZ_TRACKKING_ID_KEY_VAL=`${BZ_TRACKKING_ID_KEY}=${BZ_TRACKKING_ID_VAL}`;var query=document.location.search;if(query.search(BZ_TRACKKING_ID_KEY_VAL)==-1){if (query.length!=0) {query+="&";}document.location.search=query+BZ_TRACKKING_ID_KEY_VAL;alert("테스트를 위해 페이지가 다시 로드됩니다. 로드가 완료되면 다시 북마크 버튼을 눌러서 진행해 주세요.");} else {tracking_id=localStorage.getItem("BuzzAd");if (!tracking_id || tracking_id.indexOf(BZ_TRACKKING_ID_VAL)==-1) {alert("[Fail] Step1 초기화 단계가 연동되지 않았습니다. 주어진 스크립트 코드를 그대로 삽입해주세요.");} else {alert("[Success] Step1 초기화 단계가 성공적으로 연동되었습니다! 이 페이지에서 이어서 정해진 액션을 진행하시고 완료시 성공 메시지가 뜨는지 확인하세요.");}}})();'><strong>Buzzad integration test</strong></a>
        </section>

        <section>
            <p>2. 초기화 스크립트를 삽입한 광고 페이지 URL을 아래에 입력 -  ‘테스트 하기' 클릭 - 아래의 메시지와 함께 <strong>테스트용 페이지</strong>가 새 창에서 열림</p>
            
            <input type="text" name="url" id="url_input" value='광고 페이지 URL을 입력하세요' onfocus="this.value=''" size="35">
            <input type="button" value="테스트 하기" onclick="loadUrl()">
            
            <div class="img-wrapper">
                <img src="./2.png" />
                <figcaption>위와 같은 메시지가 뜨면, 열린 새창에서 3번을 수행</figcaption>
            </div>

            <div class="info-box">
                * 필독 : <strong>위에서 입력한, 초기화 스크립트가 삽입된 URL</strong>이 <strong>전달받은 광고 페이지URL</strong>과 <strong>달라지진 않았는지 반드시 확인</strong>해주세요.
                <a href="https://buzzvil.atlassian.net/wiki/spaces/BDG/pages/1950285893/2.1.+CPA+Web+-+JavaScript#Step3.-Javascript-%EC%9B%B9-%EC%97%B0%EB%8F%99-%ED%85%8C%EC%8A%A4%ED%8A%B8" target="_blank">모바일 환경에서 URL이 변경되는지 확인하기</a>
                <a href="https://buzzvil.atlassian.net/wiki/spaces/BDG/pages/1950285893/2.1.+CPA+Web+-+JavaScript#FAQ" target="_blank">URL이 서로 다를 경우, Step1 FAQ에서 해당 항목 확인하기</a>
    
            </div>
        </section>

        <section>
            <p>3. <strong>열려진 새창에서, 1번의 북마크를 클릭</strong></p>
    
            <div class="img-wrapper">
                <img src="./3.png" />
                <figcaption>위와 같은 성공 메세지가 뜨면, 동일 페이지에서 4번을 수행</figcaption>
            </div>
        </section>

        <section>
            <p >4. <strong>정해진 액션</strong>(예: 회원가입 완료, 상담 신청 완료 등)을 <strong>완료</strong> : 성공 메세지를 담은 Alert 가 뜨면 테스트 완료</p>
            
            <div class="img-wrapper">
                <img src="./4.png" />
                <figcaption>성공 메세지 Alert이 뜨면 테스트 완료</figcaption>
            </div>

            <div class="info-box">
                * 필독 : Alert 가 발생하는지 여부 뿐만 아니라 <strong>발생하는 시점</strong> 또한 중요합니다. <strong>정확한</strong> 액션 완료 단계에서 성공 메시지가 뜨는지 <strong>꼭</strong> 확인해주세요.
    
            </div>
        </section>
        
        <section>
            <p>5. 연동이 완료되었음을 버즈빌 광고 담당자에게 알려주세요. 담당자가 최종 테스트를 한 후 성공 시 광고를 집행합니다.</p>

            <div class="info-box">
                * 각 단계 별로 성공 메세지가 뜨지 않는다면, <a href="https://buzzvil.atlassian.net/wiki/spaces/BDG/pages/1950285893/2.1.+CPA+Web+-+JavaScript#FAQ" target="_blank"><strong>연동 가이드의 FAQ</strong></a>와 <strong>온보딩 체크리스트</strong>를 참조하여 디버깅 하세요.
                    
                * <strong class="highlight">반드시 Step2 연동 테스트까지 완료하신 후</strong>에 버즈빌 광고 담당자에게 알려주시기 바랍니다.
    
            </div>
        </section>
    </body>

    <script type="text/javascript">
    	function loadUrl() {
    		var url = document.getElementById('url_input').value;
    		var test = 'bz_tracking_id=10023_71ffbffd-ccf1-4edf-9c4c';
        	var [domain, params] = url.split('?');
        	if (params == null) {
        		params = test;
        	} else {
        		params = [params, test].join('&');
        	}
        	url = [domain, params].join('?');
        	window.open(url,'_blank');
	        alert("테스트용 페이지가 새로 열렸습니다. 해당 페이지에서 나머지 테스트를 진행해주세요.");
    	}
    </script>
</html>






